<div class="video-section animate-slide-up">
    <div class="video-container">
        <% if (isYouTube) { %>
        <iframe id="youtubePlayer" 
                src="<%= video.embedUrl %>" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
        </iframe>
        <% } else { %>
        <video id="videoPlayer" controls crossorigin="anonymous" class="interactive-video" preload="metadata" poster="/thumbnails/<%= video._id %>.jpg">
            <source src="data:video/mp4;base64," type="video/mp4" id="videoSource">
            <% if (video.captionsUrl) { %>
            <track label="English" kind="subtitles" srclang="en" src="/captions/<%= courseName %>/<%= video._id %>" default />
            <% } %>
            <track id="autoCaption" label="Auto-Generated" kind="subtitles" srclang="en" 
                   src="/api/captions/vtt/<%= encodeURIComponent(courseName) %>/<%= video._id %>" default />
        </video>
        <% } %>
        
        <!-- Interactive overlay -->
        <div class="video-overlay" id="videoOverlay" style="display: none;">
            <div class="play-button" id="playButton">
                <span>â–¶</span>
            </div>
        </div>
        
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videoPlayer = document.getElementById('videoPlayer');
            const overlay = document.getElementById('videoOverlay');
            const playButton = document.getElementById('playButton');
            
            if (videoPlayer && overlay && playButton) {
                playButton.addEventListener('click', function() {
                    videoPlayer.play();
                    overlay.style.display = 'none';
                });
                
                videoPlayer.addEventListener('play', function() {
                    overlay.style.display = 'none';
                });
                
                videoPlayer.addEventListener('pause', function() {
                    overlay.style.display = 'flex';
                });
            }
        });
        </script>
    </div>
</div>